<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
	<title>IDE Setup - Abacus Formula Compiler for Java</title>
    <style media="screen" type="text/css">
		
    </style>
	<link href="../../style_screen.css" rel="stylesheet" type="text/css" media="screen" /><link href="../../style_print.css" rel="stylesheet" type="text/css" media="print" />

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1112076-2");
pageTracker._initData();
pageTracker._trackPageview();
</script>
</head>

<body>
	<div id="outer">
		<div id="left_background">
		</div>
		<div id="top_background">
		</div>
		
		<div class="chrome" id="top_chrome">
			<div id="logo_band">
				<img src="../../site_img/header_bar.gif" alt="AFC - Abacus Formula Compiler for Java" />
			</div>
			<div id="area_band">
				<div id="download_band">
					<a href="../../download/index.htm">
						<img src="../../site_img/download_button.png" />
					</a>
				</div>
				<table height="100%"><tr height="100%"><td style="vertical-align:middle">
						
					<a href="../../index.htm">Home</a> | 
						
					<a href="../../quick.htm">Quick Start</a> | <a href="../../doc/index.htm">Documentation</a> | <a href="../../download/index.htm">Download</a> | <a href="../../support/index.htm">Support</a> | <span class="selected"><a href="../../contribute/index.htm">Contribute</a></span>
				</td></tr></table>
			</div>
		</div>

		<div id="inner">
			<div class="chrome" id="inner_top_chrome">
				<div id="crumbs_band">
					<a href="../../index.htm">Home</a> &gt; <a href="../index.htm">Contribute</a> &gt; <a href="index.htm">Hacking</a> &gt; 
				</div>
			</div>

			<div class="content" id="content">

<h1>IDE Setup</h1>

	<p><span class="caps">AFC</span> is split into a number of components. Ideally, each is managed in its own <span class="caps">IDE</span> project. Then, internally, each component&#8217;s source is again split into a number of source paths covering areas like <span class="caps">API</span> (<code>intf</code>), implementation (<code>impl</code>), tests (<code>test</code>), and again into <code>java</code>, <code>resources</code>, etc. Each component&#8217;s <code>lib</code> folder is split into areas likewise.</p>


	<p>This keeps the project well organized, but it makes <span class="caps">IDE</span> setup a bit of bore. If you are using <a href="http://eclipse.org/">Eclipse</a> or <a href="http://www.jetbrains.com/idea/">IDEA</a>, then the project definitions are already there, but still need to be opened or imported.</p>


	<p>Before you setup the <span class="caps">IDE</span>, you have to run an initial build so the generated sources are in place.</p>



	<h2><a name="pagetoc__1">Rebuild Sources</a></h2>

	<p>Run <a href="build.htm"><code>ant -q build</code></a> to rebuild all the generated Java sources and source paths. Make sure that <code>ant</code> runs on the same version of the <span class="caps">JDK</span> as you configure for the projects in your <span class="caps">IDE</span>. This is because some of the generated sources differ by <span class="caps">JDK</span> version and are put into separate folders (see below).</p>


	<h2><a name="pagetoc__2">Eclipse</a></h2>

	<h4>Sources</h4>

	<p><em>Don&#8217;t forget to rebuild the generated sources first! (See above.)</em></p>


	<h4>Setup</h4>

	<p>To use <a href="http://eclipse.org/">Eclipse</a> (as I do), you can simply import the existing projects:</p>


<dl>
<dt>afc</dt><dd>in the root folder (optional; see Subversion above)</dd>

<dt>afc-runtime</dt><dd>in <code>components/runtime/</code></dd>

<dt>afc-compiler</dt><dd>in <code>components/compiler/</code></dd>

<dt>afc-decompiler</dt><dd>in <code>components/decompiler/</code></dd>

<dt>afc-spreadsheet</dt><dd>in <code>components/spreadsheet/</code></dd>

<dt>afc-spreadsheetdt.excel-xls</dt><dd>in <code>components/spreadsheet.excel.xls/</code></dd>
</dl>

	<p>Unfortunately as of Eclipse 3.3 you have to import each project separately using &#8220;File &rarr; Import&#8221;.</p>


	<h4>Code Style</h4>

	<p>The default Eclipse projects have a project-specific <a href="style.htm">code style</a> already set.</p>


	<h4>Version Control</h4>

	<p>I currently advise against installing the Mercurial plugin. Instead, just use Mercurial from the command line. The command <code>hg addremove -s ?</code> where <code>?</code> is a percentage of similarity can be used to track renames. First do <code>hg addremove -n -s ?</code> to see if it does the right thing, then drop the <code>-n</code>.</p>


	<h2><a name="pagetoc__3">IDEA</a></h2>

	<h4>Sources</h4>

	<p><em>Don&#8217;t forget to rebuild the generated sources first! (See above.)</em></p>


	<h4>Setup</h4>

	<p>The project definitions are in place. Since I don&#8217;t use <span class="caps">IDEA</span>, I cannot tell you how to import/open them.</p>


	<h2><a name="pagetoc__4">Other IDEs</a></h2>

	<h4>Sources</h4>

	<p><em>Don&#8217;t forget to rebuild the generated sources first! (See above.)</em></p>


	<h4>Setup</h4>

	<p>Ideally, set up each component in its own project. Then you can define project dependencies to make sure you don&#8217;t violate <a href="dependencies.htm">.jar boundaries</a>. The components are in <code>components/</code>. Each component has a bunch of source folders in <code>components/.../src/.../</code>. They might also have external jars in <code>components/.../lib/.../</code> (see the <a href="files.htm">files overview</a>).</p>


	<p>Make sure you also add <code>components/compiler/temp/java</code> and <code>components/compiler/temp/java15</code> to the compiler component&#8217;s source path (generated sources).</p>


	<p>Set line ending to Unix style (LF only) and character encoding to <span class="caps">UTF</span>-8.</p>


	<h4>Tests</h4>

	<p>Now make sure that, when running tests for a component, the current folder is set to the component&#8217;s folder (<code>components/compiler</code>, for example).</p>


	<h4>Code Style</h4>

	<p>Finally, you may want to update Java source code formatter rules for the preferred <a href="style.htm">code style</a> to use with <span class="caps">AFC</span>.</p>

			</div>
			<div class="chrome" id="inner_bottom_chrome">
			</div>
		</div>
		
		
		
		<div class="chrome" id="left_top_chrome">
			<div id="area_toc"><div class="area"><a href="http://groups.google.com/group/formulacompiler-users">Discussion Forum</a></div>
<div class="area"><a href="http://code.google.com/p/formulacompiler/w/list">Wiki</a></div>
<div class="area"><a href="http://code.google.com/p/formulacompiler/issues/list">Bug Reports</a></div>
<div class="area"><span class="selected"><a href="../../contribute/hacking/index.htm">Developer Documentation</a></span></div>
<div class="nested">
<div class="area"><span class="selected">IDE Setup</span></div>
<div id="page_toc"><div class="toc"><ul class="toc toc1"><li><a href="#pagetoc__1">Rebuild Sources</a></li><li><a href="#pagetoc__2">Eclipse</a></li><li><a href="#pagetoc__3">IDEA</a></li><li><a href="#pagetoc__4">Other IDEs</a></li></ul></div></div>
</div>
<div class="area"><a href="../../contribute/copyright.htm">Granting Of Rights</a></div>
<div class="area"><a href="../../contribute/journal/index.htm">Peter's Journal</a></div>
<div class="area"><a href="../../contribute/journal_old.htm">... Older Journal</a></div>
<div class="area"><a href="../../contribute/journal_older.htm">... Ancient Journal</a></div></div>
		</div>
		</div>
		<div class="chrome" id="left_bottom_chrome">
			<div id="copyright">
				Copyright &copy; 2005-2009 by <a href="http://www.abacus.ch/">Abacus Research AG</a>.  All rights reserved.
			</div>
		</div>
	
</body>
</html>
