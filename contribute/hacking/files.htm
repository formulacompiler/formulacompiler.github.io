<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
	<title>Overview Of Files And Folders - Abacus Formula Compiler for Java</title>
    <style media="screen" type="text/css">
		
    </style>
	<link href="../../style_screen.css" rel="stylesheet" type="text/css" media="screen" /><link href="../../style_print.css" rel="stylesheet" type="text/css" media="print" />

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1112076-2");
pageTracker._initData();
pageTracker._trackPageview();
</script>
</head>

<body>
	<div id="outer">
		<div id="left_background">
		</div>
		<div id="top_background">
		</div>
		
		<div class="chrome" id="top_chrome">
			<div id="logo_band">
				<img src="../../site_img/header_bar.gif" alt="AFC - Abacus Formula Compiler for Java" />
			</div>
			<div id="area_band">
				<div id="download_band">
					<a href="../../download/index.htm">
						<img src="../../site_img/download_button.png" />
					</a>
				</div>
				<table height="100%"><tr height="100%"><td style="vertical-align:middle">
						
					<a href="../../index.htm">Home</a> | 
						
					<a href="../../quick.htm">Quick Start</a> | <a href="../../doc/index.htm">Documentation</a> | <a href="../../download/index.htm">Download</a> | <a href="../../support/index.htm">Support</a> | <span class="selected"><a href="../../contribute/index.htm">Contribute</a></span>
				</td></tr></table>
			</div>
		</div>

		<div id="inner">
			<div class="chrome" id="inner_top_chrome">
				<div id="crumbs_band">
					<a href="../../index.htm">Home</a> &gt; <a href="../index.htm">Contribute</a> &gt; <a href="index.htm">Hacking</a> &gt; 
				</div>
			</div>

			<div class="content" id="content">

<h1>Overview Of Files And Folders</h1>

	<p>This section gives an overview of the important files and folders of <span class="caps">AFC</span>.</p>



	<h2><a name="pagetoc__1">Conventions</a></h2>

	<p>Text files use</p>

<ul>
	<li><em>Unix line ending</em> conventions (LF only), and</li>
	<li><em>UTF-8</em> character encoding.</li>
</ul>

	<h2><a name="pagetoc__2">Structure</a></h2>

	<h3><a name="pagetoc__2_1">Top-Level Structure</a></h3>

	<p>The following folders and their subfolders are under version control:</p>


<dl>
<dt>./</dt><dd>License terms, build files, the documentation redirection, and project definitions (Eclipse, <span class="caps">IDEA</span>).</dd>

<dt>components/.../</dt><dd>Individual sub-components of <span class="caps">AFC</span>, which is each represented by its own project. See below for details.</dd>

<dt>src/</dt><dd>Source for documentation, build configuration, and scripts.</dd>

<dt>src/doc/</dt><dd>Source of the documentation in <a href="http://arrenbrecht.ch/rextile/">Rextile</a> and <span class="caps">HTML</span>/CSS format.</dd>

<dt>lib/test/</dt><dd>Third-party .jar files required to test <span class="caps">AFC</span> components. (Test is an <em>area</em>, see below.)</dd>
</dl>

	<p>These folders are non-versioned:</p>


<dl>
<dt>doc/</dt><dd>Documenation files (generated from <code>src/doc/</code> by <code>ant doc</code>).</dd>

<dt>doc/javadoc/</dt><dd>Generated <span class="caps">API</span> documentation for <span class="caps">AFC</span>.</dd>

<dt>dist/</dt><dd>Distribution packages (generated by <code>ant dist</code>).</dd>

<dt>temp/</dt><dd>Temporary files created during builds.</dd>
</dl>

	<h3><a name="pagetoc__2_2">Component Structure</a></h3>

	<p>Within each component in <code>components/</code>, we have the following structure. Versioned folders:</p>


<dl>
<dt>./</dt><dd>Build files, project definitions (Eclipse, <span class="caps">IDEA</span>).</dd>

<dt>./src/.../</dt><dd>Source files for the different areas.</dd>

<dt>./lib/.../</dt><dd>Third-party .jar and license files.</dd>
</dl>

	<p>Non-versioned folders:</p>


<dl>
<dt>./build/</dt><dd>Generated .jar files (generated by <code>ant build</code>).</dd>

<dt>./temp/</dt><dd>Temporary files created during builds.</dd>
</dl>

	<h3><a name="pagetoc__2_3">Areas</a></h3>

	<p>Within the <code>src/</code>, <code>lib/</code>, and <code>temp/</code> folders, we often have a separation into areas. Typical areas are:</p>

<dl>
	<dt>intf</dt>
	<dd>Public interface</dd>

	<dt>impl</dt>
	<dd>Non-public implementation (but visible to other <span class="caps">AFC</span> components)</dd>

	<dt>test</dt>
	<dd>Unit tests</dd>

	<dt>test-reference</dt>
	<dd>Comprehensive tests (long running)</dd>

	<dt>build</dt>
	<dd>Code which generates other source code during build (parser definitions, for example)</dd>

	<dt>patches</dt>
	<dd>Custom patches to required third-party libraries as shipped in <code>lib/</code></dd>
</dl>

	<h3><a name="pagetoc__2_4">Source Types</a></h3>

	<p>Within the areas, the source is again split into different types of source:</p>

<dl>
	<dt>java</dt>
	<dd>.java source files</dd>

	<dt>java-debug</dt>
	<dd>.java source files for temporary debug aids which are never referenced in release builds; this path is typically enabled in the <span class="caps">IDE</span>, but must never be referenced in <code>build.xml</code></dd>

	<dt>resources</dt>
	<dd>other files needed in the final .jar</dd>

	<dt>data</dt>
	<dd>other files <em>not</em> needed in the final .jar</dd>
</dl>

	<p>A guiding principle is that, the <code>intf</code> areas should not have dependencies on anything but other <code>intf</code> areas. This is enforced in the build scripts.</p>


	<h2><a name="pagetoc__3">Components</a></h2>

	<p>What follows is a component breakdown generated from <code>components.yaml</code> (there is also a <a href="dependencies.htm">more detailed breakdown</a> including packages).</p>


	<h3><a name="pagetoc__3_1">Core</a></h3>

	<p><span class="caps">AFC</span>&#8217;s functional model to byte code compiler and runtime. The spreadsheet compiler sits on top of this and first transforms a spreadsheet into a functional model.</p>


<dl>
<dt>Runtime (formulacompiler-runtime)</dt><dd>All the components needed to run compiled engines.</dd>

<dt>Compiler (formulacompiler-compiler)</dt><dd>Functional model to byte code compiler. Does not have a fully sufficient public <span class="caps">API</span> yet. In particular, the functional model itself is not yet exposed.</dd>

<dt>Decompiler (formulacompiler-decompiler)</dt><dd>Byte code engine decompiler.</dd>
</dl>

	<h3><a name="pagetoc__3_2">Spreadsheet</a></h3>

	<p><span class="caps">AFC</span>&#8217;s spreadsheet to functional model and &#8211; in the end &#8211; bytecode engine compiler.</p>


<dl>
<dt>Compiler (formulacompiler-spreadsheet)</dt><dd>The core compiler which does everything except load and save spreadsheets in the different supported file formats.</dd>

<dt>Excel.xls (formulacompiler-spreadsheet-excel-xls)</dt><dd>Excel .xls file format handlers.</dd>

<dt>Openoffice.ods (formulacompiler-spreadsheet-opendocument)</dt><dd>OpenOffice .ods (OpenDocument) file format handlers.</dd>
</dl>

	<h2><a name="pagetoc__4">Build Files</a></h2>

	<p>This gives a breakdown of the build files. There is also a detailed description of <a href="build.htm">AFC&#8217;s build process and targets</a>.</p>


	<p>The top-level folder contains:</p>


<dl>
<dt>build.xml</dt><dd>Top-level <a href="http://ant.apache.org/">Ant</a> build script. Delegates many of its tasks to the component build scripts.</dd>

<dt>build.default.properties</dt><dd>Default custom build properties. You should override these in a custom <code>build.properties</code> file.</dd>

<dt>build.properties</dt><dd>Optional custom build properties. Use this to locate external tools. See <code>build.default.properties</code> for a list of things to define. <em>Never put this file under version control.</em></dd>

<dt>components/build-common.xml</dt><dd>Common tasks for all of the component build scripts.</dd>

<dt>components/.../build.xml</dt><dd>Individual component build scripts.</dd>

<dt>src/checkstyle-config.xml</dt><dd>Configuration of <a href="http://checkstyle.sourceforge.net/">CheckStyle</a> for all of the Java sources in <span class="caps">AFC</span>. Checks the copyright header, for instance (see <code>copyright-header.txt</code>).</dd>

<dt>src/checkstyle-config-apionly.xml</dt><dd>Extended configuration of <a href="http://checkstyle.sourceforge.net/">CheckStyle</a> for all of the Java sources of <span class="caps">AFC</span>&#8217;s <span class="caps">API</span>. Enforces JavaDoc comments, for instance.</dd>

<dt>src/copyright-header.txt</dt><dd>Required copyright header text for all Java sources (see <code>checkstyle-config.xml</code>).</dd>

<dt>src/jcite-tripwires.txt</dt><dd><a href="http://arrenbrecht.ch/jcite/tripwire.htm">Tripwire database</a> for <a href="http://arrenbrecht.ch/jcite/">JCite</a>.</dd>
</dl>

	<h2><a name="pagetoc__5">Scripts</a></h2>

	<p>The scripts are all <a href="http://ruby-lang.org/">Ruby</a> scripts used to generate part of the build system and the documentation.</p>


<dl>
<dt>src/scripts/components.yaml</dt><dd>Component definitions with dependency information in <a href="http://www.yaml.org/">YAML</a> format. Input to <code>project.rb</code>, which in turn feeds it to the various <code>gen-*.rb</code> scripts. <br /><strong>Warning: This file must not contain hard tabs!</strong></dd>

<dt>src/scripts/project.rb</dt><dd>Reads <code>components.yaml</code> and exposes the component structure in an accessible object model.</dd>

<dt>src/scripts/gen-macker-rules.rb</dt><dd>Generates <code>temp/macker-rules.xml</code>, which drives component dependency checking in <code>build.xml</code> using <a href="http://innig.net/macker/index.html">Macker</a>.</dd>

<dt>src/scripts/macker-rules-template.xml</dt><dd>Embedded Ruby template used by <code>gen-macker-rules.rb</code>.</dd>

<dt>src/scripts/gen-dependency-graph.rb</dt><dd>Generates <code>temp/doc/contribute/hacking/dependency-graph.dot</code>, from which <a href="dependency-graph.png">doc/contribute/hacking/dependency-graph.png</a> is produced by <a href="http://www.graphviz.org/">dot</a>.</dd>

<dt>src/scripts/gen-dependency-overview.rb</dt><dd>Generates <code>temp/doc/contribute/hacking/packages.rextinc</code>, which is included in the documentation.</dd>

<dt>src/scripts/gen-component-overview.rb</dt><dd>Generates <code>temp/doc/contribute/hacking/components.rextinc</code>, which is included in the documentation.</dd>
</dl>

	<h2><a name="pagetoc__6">Miscellany</a></h2>

<dl>
<dt>.project <br /> .classpath <br /> .settings/</dt><dd><a href="ide.htm">Eclipse project definitions</a>.</dd>

<dt>xy.iml</dt><dd><span class="caps">IDEA</span> project definitions.</dd>

<dt>index.html</dt><dd>Redirection to <code>doc/index.htm</code>.</dd>

<dt><span class="caps">LICENSE</span>.html</dt><dd>Top-level license terms for <span class="caps">AFC</span>. Duplicated in <code>doc/LICENSE.html</code>.</dd>
</dl>

			</div>
			<div class="chrome" id="inner_bottom_chrome">
			</div>
		</div>
		
		
		
		<div class="chrome" id="left_top_chrome">
			<div id="area_toc"><div class="area"><a href="http://groups.google.com/group/formulacompiler-users">Discussion Forum</a></div>
<div class="area"><a href="http://formulacompiler.org/trac/wiki">Wiki</a></div>
<div class="area"><a href="http://formulacompiler.org/trac/report">Bug Reports</a></div>
<div class="area"><span class="selected"><a href="../../contribute/hacking/index.htm">Developer Documentation</a></span></div>
<div class="nested">
<div class="area"><span class="selected">Overview Of Files And Folders</span></div>
<div id="page_toc"><div class="toc"><ul class="toc toc1"><li><a href="#pagetoc__1">Conventions</a></li><li class="withitems"><a href="#pagetoc__2">Structure</a><ul class="toc toc2"><li><a href="#pagetoc__2_1">Top-Level Structure</a></li><li><a href="#pagetoc__2_2">Component Structure</a></li><li><a href="#pagetoc__2_3">Areas</a></li><li><a href="#pagetoc__2_4">Source Types</a></li></ul></li><li class="withitems"><a href="#pagetoc__3">Components</a><ul class="toc toc2"><li><a href="#pagetoc__3_1">Core</a></li><li><a href="#pagetoc__3_2">Spreadsheet</a></li></ul></li><li><a href="#pagetoc__4">Build Files</a></li><li><a href="#pagetoc__5">Scripts</a></li><li><a href="#pagetoc__6">Miscellany</a></li></ul></div></div>
</div>
<div class="area"><a href="../../contribute/copyright.htm">Granting Of Rights</a></div>
<div class="area"><a href="../../contribute/journal/index.htm">Peter's Journal</a></div>
<div class="area"><a href="../../contribute/journal_old.htm">... Older Journal</a></div>
<div class="area"><a href="../../contribute/journal_older.htm">... Ancient Journal</a></div></div>
		</div>
		</div>
		<div class="chrome" id="left_bottom_chrome">
			<div id="copyright">
				Copyright &copy; 2005-2008 by <a href="http://www.abacus.ch/">Abacus Research AG</a>.  All rights reserved.
			</div>
		</div>
	
</body>
</html>
